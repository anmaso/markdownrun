# Story 1.3: Basic Shell Command Execution

Status: Done

## Story
**As a** user,
**I want** to execute a shell command from a markdown code block,
**so that** I can run commands without leaving my editor.

## Acceptance Criteria
1. Plugin executes shell commands asynchronously without blocking the editor
2. Commands run in the directory of the markdown file
3. Command execution respects a 30-second timeout
4. Plugin captures both stdout and stderr from command execution
5. Plugin provides immediate feedback when command starts and completes
6. Plugin handles command failures gracefully

## Tasks / Subtasks
- [x] Implement async execution engine in `lua/markdownrun/execution.lua`
  - [x] Use `vim.system`/`uv.spawn`; non-blocking
  - [x] Default shell `/bin/sh`; configurable
  - [x] Enforce 30s timeout with graceful termination
- [x] Capture stdout/stderr streams and duration
- [x] Provide start/completion notifications and basic status signaling
- [x] Handle non-zero exits distinctly from timeouts

## Dev Notes
- See "6. Execution Engine" for APIs, timeout handling and exit processing. [Source: architecture.md#6.-Execution-Engine]
- Working directory resolution relative to markdown file per FR8. [Source: architecture.md#6.-Execution-Engine]

### Testing
- Integration test: run `echo` and failing commands; verify timeout path. [Source: architecture.md#13.-Testing-Strategy]

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-08 | 0.1 | Initial draft | PO Agent |
| 2025-08-08 | 0.2 | Implemented async execution engine with timeout, I/O capture, and notifications | dev.mdc |
